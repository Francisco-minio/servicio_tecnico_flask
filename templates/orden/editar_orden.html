{% extends 'base.html' %} {% block title %}Editar Orden{% endblock %} {% block content %}
<div class="container-fluid">
    <h1 class="h3 mb-4 text-gray-800">Editar Orden #{{ orden.id }}</h1>
    <form method="POST">
        <div class="form-group">
            <label for="equipo">Equipo</label>
            <input type="text" class="form-control" id="equipo" name="equipo" value="{{ orden.equipo or '' }}" required>
        </div>
        <div class="form-group">
            <label for="marca">Marca</label>
            <input type="text" class="form-control" id="marca" name="marca" value="{{ orden.marca or '' }}">
        </div>
        <div class="form-group">
            <label for="modelo">Modelo</label>
            <input type="text" class="form-control" id="modelo" name="modelo" value="{{ orden.modelo or '' }}">
        </div>
        <div class="form-group">
            <label for="procesador">Procesador</label>
            <input type="text" class="form-control" id="procesador" name="procesador" value="{{ orden.procesador or '' }}">
        </div>
        <div class="form-group">
            <label for="ram">RAM</label>
            <input type="text" class="form-control" id="ram" name="ram" value="{{ orden.ram or '' }}">
        </div>
        <div class="form-group">
            <label for="disco">Disco</label>
            <input type="text" class="form-control" id="disco" name="disco" value="{{ orden.disco or '' }}">
        </div>
        <div class="form-group">
            <label for="pantalla">Pantalla</label>
            <input type="text" class="form-control" id="pantalla" name="pantalla" value="{{ orden.pantalla or '' }}">
        </div>
        <div class="form-group">
            <label for="correo">Correo alternativo</label>
            <input type="email" class="form-control" id="correo" name="correo" value="{{ orden.correo or '' }}">
        </div>
        <div class="form-group">
            <label for="tecnico_id">Técnico asignado</label>
            <select class="form-control" id="tecnico_id" name="tecnico_id">
                <option value="">-- Sin técnico --</option>
                {% for tecnico in tecnicos %}
                <option value="{{ tecnico.id }}" {% if orden.tecnico and orden.tecnico.id == tecnico.id %}selected{% endif %}>{{ tecnico.nombre or tecnico.username }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group">
            <label for="cliente_id">Cliente</label>
            <select class="form-control" id="cliente_id" name="cliente_id" required>
                {% for cliente in clientes %}
                <option value="{{ cliente.id }}" {% if orden.cliente and orden.cliente.id == cliente.id %}selected{% endif %}>{{ cliente.nombre }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group">
            <label for="descripcion">Descripción</label>
            <textarea class="form-control" id="descripcion" name="descripcion" rows="4">{{ orden.descripcion or '' }}</textarea>
        </div>
        <div class="form-group">
            <label for="estado">Estado</label>
            <select class="form-control" id="estado" name="estado">
                <option value="Ingresado" {% if orden.estado == 'Ingresado' %}selected{% endif %}>Ingresado</option>
                <option value="En Diagnóstico" {% if orden.estado == 'En Diagnóstico' %}selected{% endif %}>En Diagnóstico</option>
                <option value="Esperando Repuestos" {% if orden.estado == 'Esperando Repuestos' %}selected{% endif %}>Esperando Repuestos</option>
                <option value="En Reparación" {% if orden.estado == 'En Reparación' %}selected{% endif %}>En Reparación</option>
                <option value="Terminado" {% if orden.estado == 'Terminado' %}selected{% endif %}>Terminado</option>
                <option value="Entregado" {% if orden.estado == 'Entregado' %}selected{% endif %}>Entregado</option>
            </select>
        </div>
        <button type="submit" class="btn btn-primary">Guardar Cambios</button>
        <a href="{{ url_for('orden.ver_orden', orden_id=orden.id) }}" class="btn btn-secondary">Cancelar</a>
    </form>
</div>
{% endblock %}